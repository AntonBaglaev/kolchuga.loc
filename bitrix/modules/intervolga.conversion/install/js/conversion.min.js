(function(){var x,p,r,y,s,t,m,u,h,z,v,w,A,l,q,n,g;A=function(){};w="assert clear count debug dir dirxml error exception group groupCollapsed groupEnd info log markTimeline profile profileEnd table time timeEnd timeStamp trace warn".split(" ");if(null==this.console)try{this.console={}}catch(B){}h=0;for(z=w.length;h<z;h++){v=w[h];try{null==this.console[v]&&(this.console[v]=A)}catch(C){}}x=function(a){var b,c,f;b=!1;c=function(){if(!b)return b=!0,a()};document.addEventListener?document.addEventListener("DOMContentLoaded",
function(){return c()},!1):document.attachEvent&&(document.documentElement.doScroll&&this===this.top&&(f=function(){if(!b&&document.body)try{return document.documentElement.doScroll("left"),c()}catch(a){return setTimeout(f,0)}},f()),document.attachEvent("onreadystatechange",function(){if("complete"===document.readyState)return c()}));if(this.addEventListener)return this.addEventListener("load",c,!1);if(this.attachEvent)return this.attachEvent("onload",c)};l=[];h=function(a){l.length||x(function(){var a,
c,f,e;e=[];a=0;for(c=l.length;a<c;a++)f=l[a],e.push(f());return e});return l.push(a)};n=null;u=function(){var a;if(null==n){var b;b=[];for(a in this)-1!==a.search("yaCounter")&&b.push(a);a=b[0];null!=a?(console.debug("Ya counter found: "+a),n=this[a]):(console.debug("Ya counter not found"),n=null)}return n};g=[];s=function(a){var b,c,f,e;g.push(a);if(e=u()){a=0;for(c=g.length;a<c;a++)f=g[a],f(e);return g=[]}return this.yandex_metrika_callbacks?(console.debug("Not found ready YaCounter, trying to wait it for"),
b=function(){var a,c;if(e=u()){a=0;for(c=g.length;a<c;a++)f=g[a],f(e);return g=[]}return setTimeout(b,2E3)},setTimeout(b,2E3)):console.debug("Ya counter is not installed")};t=function(){var a;return(null!=(a=this.BX||top.BX)?"function"===typeof a.message?a.message("COOKIE_PREFIX"):void 0:void 0)||"BITRIX_SM"};m=function(a){a=t()+"_"+a;return(a=document.cookie.match(new RegExp("(?:^|; )"+a.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)")))?decodeURIComponent(a[1].toString().split("+").join(" ")):
null};q=function(a,b,c){var f,e,d;a=t()+"_"+a;c=c||{};e=c.expires;"number"===typeof e&&e&&(f=new Date,f.setTime(f.getTime()+1E3*e),e=c.expires=f);e&&e.toUTCString&&(c.expires=e.toUTCString());b=encodeURIComponent(b.toString().split(" ").join("+"));a=a+"="+b;for(d in c)a+="; "+d,b=c[d],!0!==b&&(a+="="+b);return document.cookie=a};p=function(){var a,b;try{a=m("BASKET_ADDED_G"),"Y"===a&&(console.debug("Found cookie BASKET_ADDED_G"),null!=this.ga?(this.ga("send","event","conversion","GOAL_ADD2BASKET"),
this.ga("send","pageview","/conversion-pages/add2basket/"),console.debug("Sended goal GOAL_ADD2BASKET and hit '/conversion-pages/add2basket/' to GA")):null!=this._gaq?(this._gaq.push(["_trackEvent","conversion","GOAL_ADD2BASKET"]),this._gaq.push(["_trackPageview","/conversion-pages/add2basket/"]),console.debug("Sended goal GOAL_ADD2BASKET and hit '/conversion-pages/add2basket/' to GAQ")):console.debug("Not found ready GA/GAQ counter"),console.debug("Handled cookie BASKET_ADDED_G"),q("BASKET_ADDED_G",
"N",{path:"/",expires:1}),console.debug("Removed cookie BASKET_ADDED_G"))}catch(c){b=c,console.debug(b)}try{if(a=m("BASKET_ADDED_Y"),"Y"===a)return console.debug("Found cookie BASKET_ADDED_Y"),s(function(a){a.reachGoal("GOAL_ADD2BASKET");a.hit("/conversion-pages/add2basket/");console.debug("Sended goal GOAL_ADD2BASKET and hit '/conversion-pages/add2basket/' to YA");console.debug("Handled cookie BASKET_ADDED_Y");q("BASKET_ADDED_Y","N",{path:"/",expires:1});return console.debug("Removed cookie BASKET_ADDED_Y")})}catch(f){return b=
f,console.debug(b)}};r=function(){var a,b;try{if(a=m("ORDER_ADDED_G"),null==a&&(a=""),b=a,0===b.length&&(a=m("ORDER_ADDED_Y"),null==a&&(a=0),b=a),0<b.length){if(null!=this.eshopOrder)return console.debug("Found order data"),y();console.debug("Not found order data");return null!=this.jQuery?(console.debug("Loading order data via jQuery"),this.jQuery.getScript("/bitrix/admin/intervolga.conversion_order.php")):null!=this.BX&&null!=this.BX.ajax?(console.debug("Loading order data via BX"),this.BX.ajax.loadScriptAjax("/bitrix/admin/intervolga.conversion_order.php")):
console.debug("Cant load order data: jQuery or BX are not present")}}catch(c){return console.debug(c)}};y=function(){var a,b,c,f,e,d,k,h,g,l;try{if(k=m("ORDER_ADDED_G"),null==k&&(k=0),h=k,0<h.length&&null!=this.eshopOrder&&this.eshopOrder.id.toString()===k){d=this.eshopOrder;console.debug("Found cookie ORDER_ADDED_G");if(null!=this.ga){this.ga("require","ecommerce","ecommerce.js");this.ga("ecommerce:addTransaction",{id:d.id,affiliation:d.affiliation,revenue:d.revenue,shipping:d.shipping,tax:d.tax,
currency:d.currency});g=d.items;a=0;for(f=g.length;a<f;a++)b=g[a],this.ga("ecommerce:addItem",{id:d.id,name:b.name,sku:b.id,category:b.category,price:b.price,quantity:b.quantity,currency:b.currency});this.ga("ecommerce:send");console.debug("Sended order data to GA");this.ga("send","event","conversion","GOAL_MAKEORDER");this.ga("send","pageview","/conversion-pages/makeorder/");console.debug("Sended goal GOAL_MAKEORDER and hit '/conversion-pages/makeorder/' to GA")}else if(this._gaq){this._gaq.push(["_addTrans",
d.id,d.affiliation,d.revenue,d.tax,d.shipping,d.city,d.state,d.country]);l=d.items;c=0;for(e=l.length;c<e;c++)b=l[c],this._gaq.push(["_addItem",d.id,b.id,b.name,b.category,b.price,b.quantity]);this._gaq.push(["_set","currencyCode",d.currency]);this._gaq.push(["_trackTrans"]);console.debug("Sended order data to GAQ");this._gaq.push(["_trackEvent","conversion","GOAL_MAKEORDER"]);this._gaq.push(["_trackPageview","/conversion-pages/makeorder/"]);console.debug("Sended goal GOAL_MAKEORDER and hit '/conversion-pages/makeorder/' to GAQ")}else console.debug("Not found ready GA/GAQ counter");
console.debug("Handled cookie ORDER_ADDED_G");q("ORDER_ADDED_G",0,{path:"/",expires:1});console.debug("Removed cookie ORDER_ADDED_G")}}catch(n){a=n,console.debug(a)}try{if(k=m("ORDER_ADDED_Y"),null==k&&(k=0),h=k,0<h.length)return s(function(a){var c,e,f,g;k=m("ORDER_ADDED_Y");null==k&&(k=0);h=k;if(0<h.length&&null!=this.eshopOrder&&this.eshopOrder.id.toString()===k){d=this.eshopOrder;console.debug("Found cookie ORDER_ADDED_Y");g={};g.order_id=d.id;g.order_price=d.revenue;g.currency="RUB"===d.currency?
"RUR":d.currency;g.exchange_rate=1;g.goods=[];f=d.items;c=0;for(e=f.length;c<e;c++)b=f[c],g.goods.push({id:b.id,name:b.name,price:b.price,quantity:b.quantity});a.reachGoal("GOAL_MAKEORDER",g);console.debug("Sended order data and goal GOAL_MAKEORDER to YA");a.hit("/conversion-pages/makeorder/");console.debug("Sended hit '/conversion-pages/makeorder/' to YA");console.debug("Handled cookie ORDER_ADDED_Y");q("ORDER_ADDED_Y",0,{path:"/",expires:1});return console.debug("Removed cookie ORDER_ADDED_Y")}})}catch(p){return a=
p,console.debug(a)}};h(p);h(r);h(function(){try{if(null!=this.jQuery)return $(document).ajaxSuccess(function(a){return function(a,b,e){if(null!=e)return console.debug("Catch jQuery succes request: "+e.url),p(),r()}}(this))}catch(a){return console.debug(a)}});h(function(){try{if(null!=this.BX)return BX.addCustomEvent("onAjaxSuccess",function(a,c){if(null!=c)return console.debug("Catch BX succes request: "+c.url),p(),r()})}catch(a){return console.debug(a)}})}).call(this);
